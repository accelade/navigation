{"version":3,"file":"navigation.js","sources":["../resources/js/core/navigation/types.ts","../resources/js/core/navigation/NavigationManager.ts","../resources/js/index.ts"],"sourcesContent":["/**\n * Navigation Types\n *\n * Type definitions for the Navigation package.\n */\n\n/**\n * Sidebar state\n */\nexport interface SidebarState {\n    /** Whether the sidebar is expanded (desktop) */\n    open: boolean;\n\n    /** Whether the mobile sidebar is open */\n    mobileOpen: boolean;\n}\n\n/**\n * Sidebar configuration\n */\nexport interface SidebarConfig {\n    /** Sidebar side (left or right) */\n    side: 'left' | 'right';\n\n    /** Collapsible mode */\n    collapsible: 'offcanvas' | 'icon' | 'none';\n\n    /** Sidebar variant */\n    variant: 'sidebar' | 'floating' | 'inset';\n\n    /** Mobile breakpoint in pixels */\n    mobileBreakpoint: number;\n\n    /** Sidebar width */\n    width: string;\n\n    /** Sidebar width when collapsed to icons */\n    widthIcon: string;\n\n    /** Sidebar width on mobile */\n    widthMobile: string;\n}\n\n/**\n * Default sidebar configuration\n */\nexport const defaultSidebarConfig: SidebarConfig = {\n    side: 'left',\n    collapsible: 'offcanvas',\n    variant: 'sidebar',\n    mobileBreakpoint: 768,\n    width: '17rem',\n    widthIcon: '4.5rem',\n    widthMobile: '18rem',\n};\n\n/**\n * Navigation manager options\n */\nexport interface NavigationManagerOptions {\n    /** Auto-initialize on construction */\n    autoInit?: boolean;\n\n    /** Debounce timeout for resize events (ms) */\n    resizeDebounce?: number;\n\n    /** Custom selector for sidebar elements */\n    sidebarSelector?: string;\n\n    /** Custom selector for menu elements */\n    menuSelector?: string;\n\n    /** Custom selector for menu button elements */\n    menuButtonSelector?: string;\n\n    /** Custom selector for trigger buttons */\n    triggerSelector?: string;\n}\n\n/**\n * Default navigation manager options\n */\nexport const defaultNavigationOptions: Required<NavigationManagerOptions> = {\n    autoInit: true,\n    resizeDebounce: 100,\n    sidebarSelector: '[data-sidebar=\"sidebar\"]',\n    menuSelector: '[data-sidebar=\"menu\"]',\n    menuButtonSelector: '[data-sidebar=\"menu-button\"]',\n    triggerSelector: '[data-sidebar=\"trigger\"]',\n};\n\n/**\n * Keyboard navigation key codes\n */\nexport type NavigationKey = 'ArrowDown' | 'ArrowUp' | 'Home' | 'End' | 'Escape' | 'Enter' | 'Space';\n\n/**\n * Event types dispatched by the navigation system\n */\nexport interface NavigationEvents {\n    /** Sidebar state changed */\n    'navigation:state-changed': CustomEvent<{\n        state: SidebarState;\n        previousState: SidebarState;\n    }>;\n\n    /** Sidebar toggled */\n    'navigation:toggled': CustomEvent<{\n        open: boolean;\n        mobile: boolean;\n    }>;\n\n    /** Navigation ready */\n    'navigation:ready': CustomEvent<{\n        manager: unknown;\n    }>;\n}\n\n/**\n * Accelade store interface (subset for type safety)\n */\nexport interface AcceladeStore {\n    $get: <T = unknown>(key: string) => T;\n    $set: <T = unknown>(key: string, value: T) => void;\n    $subscribe: (callback: () => void) => () => void;\n}\n\n/**\n * Global Accelade interface\n */\nexport interface AcceladeGlobal {\n    store?: (name: string) => AcceladeStore | undefined;\n    notify?: {\n        success: (title: string, message?: string, options?: { duration?: number }) => void;\n        danger: (title: string, message?: string, options?: { duration?: number }) => void;\n        warning: (title: string, message?: string, options?: { duration?: number }) => void;\n        info: (title: string, message?: string, options?: { duration?: number }) => void;\n    };\n}\n","/**\n * NavigationManager - Handles sidebar navigation functionality\n *\n * Provides interactive sidebar functionality including:\n * - Sidebar collapse/expand on desktop\n * - Mobile sidebar sheet with overlay\n * - Keyboard navigation support\n * - Focus management\n * - Tooltip support for collapsed items\n * - Accessibility (ARIA attributes)\n */\n\nimport type {\n    SidebarState,\n    SidebarConfig,\n    NavigationManagerOptions,\n    NavigationKey,\n    AcceladeStore,\n} from './types';\n\nimport { defaultSidebarConfig, defaultNavigationOptions } from './types';\n\n/**\n * NavigationManager class\n * Singleton pattern for managing sidebar navigation\n */\nexport class NavigationManager {\n    private static instance: NavigationManager | null = null;\n    private initialized: boolean = false;\n    private resizeTimeout: ReturnType<typeof setTimeout> | null = null;\n    private lastWindowWidth: number = 0;\n    private options: Required<NavigationManagerOptions>;\n    private config: SidebarConfig;\n    private previousState: SidebarState = { open: true, mobileOpen: false };\n\n    private constructor(options: NavigationManagerOptions = {}) {\n        this.options = { ...defaultNavigationOptions, ...options };\n        this.config = { ...defaultSidebarConfig };\n        this.lastWindowWidth = typeof window !== 'undefined' ? window.innerWidth : 0;\n\n        if (this.options.autoInit) {\n            this.init();\n        }\n    }\n\n    /**\n     * Get singleton instance\n     */\n    public static getInstance(options?: NavigationManagerOptions): NavigationManager {\n        if (!NavigationManager.instance) {\n            NavigationManager.instance = new NavigationManager(options);\n        }\n        return NavigationManager.instance;\n    }\n\n    /**\n     * Reset the singleton instance (useful for testing)\n     */\n    public static resetInstance(): void {\n        if (NavigationManager.instance) {\n            NavigationManager.instance.destroy();\n            NavigationManager.instance = null;\n        }\n    }\n\n    /**\n     * Initialize the navigation manager\n     */\n    public init(): void {\n        if (this.initialized) {\n            return;\n        }\n\n        this.bindEvents();\n        this.setupAccessibility();\n        this.handleResize();\n        this.initialized = true;\n\n        // Dispatch ready event\n        this.dispatchEvent('navigation:ready', { manager: this });\n    }\n\n    /**\n     * Destroy the navigation manager and clean up\n     */\n    public destroy(): void {\n        if (this.resizeTimeout) {\n            clearTimeout(this.resizeTimeout);\n        }\n        this.initialized = false;\n    }\n\n    /**\n     * Check if the manager is initialized\n     */\n    public isInitialized(): boolean {\n        return this.initialized;\n    }\n\n    /**\n     * Bind event listeners\n     */\n    private bindEvents(): void {\n        // Handle escape key to close mobile sidebar\n        document.addEventListener('keydown', this.handleKeyDown.bind(this));\n\n        // Handle window resize with debounce\n        window.addEventListener('resize', this.handleResizeEvent.bind(this));\n\n        // Setup keyboard navigation for menus\n        this.setupMenuKeyboardNavigation();\n    }\n\n    /**\n     * Handle keydown events\n     */\n    private handleKeyDown(event: KeyboardEvent): void {\n        if (event.key === 'Escape') {\n            this.closeMobileSidebar();\n        }\n    }\n\n    /**\n     * Handle resize events with debouncing\n     */\n    private handleResizeEvent(): void {\n        if (this.resizeTimeout) {\n            clearTimeout(this.resizeTimeout);\n        }\n        this.resizeTimeout = setTimeout(() => {\n            this.handleResize();\n        }, this.options.resizeDebounce);\n    }\n\n    /**\n     * Setup accessibility attributes\n     */\n    public setupAccessibility(): void {\n        // Add ARIA attributes to sidebar components\n        document.querySelectorAll(this.options.sidebarSelector).forEach((sidebar) => {\n            if (!sidebar.hasAttribute('role')) {\n                sidebar.setAttribute('role', 'navigation');\n            }\n            if (!sidebar.hasAttribute('aria-label')) {\n                sidebar.setAttribute('aria-label', 'Main navigation');\n            }\n        });\n\n        // Add ARIA attributes to menus\n        document.querySelectorAll(this.options.menuSelector).forEach((menu) => {\n            if (!menu.hasAttribute('role')) {\n                menu.setAttribute('role', 'menu');\n            }\n        });\n\n        // Add ARIA attributes to menu items\n        document.querySelectorAll(this.options.menuButtonSelector).forEach((button) => {\n            if (!button.hasAttribute('role')) {\n                button.setAttribute('role', 'menuitem');\n            }\n        });\n    }\n\n    /**\n     * Handle window resize events\n     */\n    private handleResize(): void {\n        const currentWidth = window.innerWidth;\n        const breakpoint = this.config.mobileBreakpoint;\n\n        // Detect crossing the mobile/desktop breakpoint\n        if (\n            (this.lastWindowWidth < breakpoint && currentWidth >= breakpoint) ||\n            (this.lastWindowWidth >= breakpoint && currentWidth < breakpoint)\n        ) {\n            // Close mobile sidebar when switching to desktop\n            if (currentWidth >= breakpoint) {\n                this.closeMobileSidebar();\n            }\n        }\n\n        this.lastWindowWidth = currentWidth;\n\n        // Update CSS custom properties for sidebar dimensions\n        this.updateSidebarDimensions();\n    }\n\n    /**\n     * Update sidebar dimension CSS custom properties\n     */\n    private updateSidebarDimensions(): void {\n        const wrapper = document.querySelector('[data-slot=\"sidebar-wrapper\"]') as HTMLElement;\n        if (!wrapper) {\n            return;\n        }\n\n        // Get computed values or defaults\n        const styles = getComputedStyle(wrapper);\n        const sidebarWidth = styles.getPropertyValue('--sidebar-width') || this.config.width;\n        const sidebarWidthIcon = styles.getPropertyValue('--sidebar-width-icon') || this.config.widthIcon;\n        const sidebarWidthMobile = styles.getPropertyValue('--sidebar-width-mobile') || this.config.widthMobile;\n\n        // Ensure CSS custom properties are available\n        if (!wrapper.style.getPropertyValue('--sidebar-width')) {\n            wrapper.style.setProperty('--sidebar-width', sidebarWidth);\n        }\n        if (!wrapper.style.getPropertyValue('--sidebar-width-icon')) {\n            wrapper.style.setProperty('--sidebar-width-icon', sidebarWidthIcon);\n        }\n        if (!wrapper.style.getPropertyValue('--sidebar-width-mobile')) {\n            wrapper.style.setProperty('--sidebar-width-mobile', sidebarWidthMobile);\n        }\n    }\n\n    /**\n     * Get the Accelade store for sidebar state\n     */\n    private getStore(): AcceladeStore | undefined {\n        const accelade = (window as { Accelade?: { store?: (name: string) => AcceladeStore } }).Accelade;\n        if (accelade?.store) {\n            return accelade.store('sidebar');\n        }\n        return undefined;\n    }\n\n    /**\n     * Close mobile sidebar\n     */\n    public closeMobileSidebar(): void {\n        const store = this.getStore();\n        if (store) {\n            const previousState = this.getState();\n            store.$set('sidebarMobileOpen', false);\n\n            this.dispatchEvent('navigation:toggled', {\n                open: false,\n                mobile: true,\n            });\n\n            this.dispatchEvent('navigation:state-changed', {\n                state: { ...previousState, mobileOpen: false },\n                previousState,\n            });\n        }\n    }\n\n    /**\n     * Open mobile sidebar\n     */\n    public openMobileSidebar(): void {\n        const store = this.getStore();\n        if (store) {\n            const previousState = this.getState();\n            store.$set('sidebarMobileOpen', true);\n\n            this.dispatchEvent('navigation:toggled', {\n                open: true,\n                mobile: true,\n            });\n\n            this.dispatchEvent('navigation:state-changed', {\n                state: { ...previousState, mobileOpen: true },\n                previousState,\n            });\n        }\n    }\n\n    /**\n     * Toggle sidebar collapse state\n     */\n    public toggleSidebar(): void {\n        const isMobile = window.innerWidth < this.config.mobileBreakpoint;\n        const store = this.getStore();\n\n        if (store) {\n            const previousState = this.getState();\n\n            if (isMobile) {\n                const newMobileOpen = !store.$get<boolean>('sidebarMobileOpen');\n                store.$set('sidebarMobileOpen', newMobileOpen);\n\n                this.dispatchEvent('navigation:toggled', {\n                    open: newMobileOpen,\n                    mobile: true,\n                });\n            } else {\n                const newOpen = !store.$get<boolean>('sidebarOpen');\n                store.$set('sidebarOpen', newOpen);\n\n                this.dispatchEvent('navigation:toggled', {\n                    open: newOpen,\n                    mobile: false,\n                });\n            }\n\n            this.dispatchEvent('navigation:state-changed', {\n                state: this.getState(),\n                previousState,\n            });\n        }\n    }\n\n    /**\n     * Expand sidebar (desktop)\n     */\n    public expandSidebar(): void {\n        const store = this.getStore();\n        if (store) {\n            const previousState = this.getState();\n            store.$set('sidebarOpen', true);\n\n            this.dispatchEvent('navigation:toggled', {\n                open: true,\n                mobile: false,\n            });\n\n            this.dispatchEvent('navigation:state-changed', {\n                state: { ...previousState, open: true },\n                previousState,\n            });\n        }\n    }\n\n    /**\n     * Collapse sidebar (desktop)\n     */\n    public collapseSidebar(): void {\n        const store = this.getStore();\n        if (store) {\n            const previousState = this.getState();\n            store.$set('sidebarOpen', false);\n\n            this.dispatchEvent('navigation:toggled', {\n                open: false,\n                mobile: false,\n            });\n\n            this.dispatchEvent('navigation:state-changed', {\n                state: { ...previousState, open: false },\n                previousState,\n            });\n        }\n    }\n\n    /**\n     * Check if sidebar is collapsed\n     */\n    public isCollapsed(): boolean {\n        const store = this.getStore();\n        if (store) {\n            return !store.$get<boolean>('sidebarOpen');\n        }\n        return false;\n    }\n\n    /**\n     * Check if mobile sidebar is open\n     */\n    public isMobileOpen(): boolean {\n        const store = this.getStore();\n        if (store) {\n            return store.$get<boolean>('sidebarMobileOpen') || false;\n        }\n        return false;\n    }\n\n    /**\n     * Check if currently in mobile viewport\n     */\n    public isMobile(): boolean {\n        return window.innerWidth < this.config.mobileBreakpoint;\n    }\n\n    /**\n     * Get current sidebar state\n     */\n    public getState(): SidebarState {\n        const store = this.getStore();\n        if (store) {\n            return {\n                open: store.$get<boolean>('sidebarOpen') ?? true,\n                mobileOpen: store.$get<boolean>('sidebarMobileOpen') ?? false,\n            };\n        }\n        return { open: true, mobileOpen: false };\n    }\n\n    /**\n     * Set sidebar state\n     */\n    public setState(state: Partial<SidebarState>): void {\n        const store = this.getStore();\n        if (store) {\n            const previousState = this.getState();\n\n            if (state.open !== undefined) {\n                store.$set('sidebarOpen', state.open);\n            }\n            if (state.mobileOpen !== undefined) {\n                store.$set('sidebarMobileOpen', state.mobileOpen);\n            }\n\n            this.dispatchEvent('navigation:state-changed', {\n                state: this.getState(),\n                previousState,\n            });\n        }\n    }\n\n    /**\n     * Get sidebar configuration\n     */\n    public getConfig(): SidebarConfig {\n        return { ...this.config };\n    }\n\n    /**\n     * Update sidebar configuration\n     */\n    public setConfig(config: Partial<SidebarConfig>): void {\n        this.config = { ...this.config, ...config };\n        this.updateSidebarDimensions();\n    }\n\n    /**\n     * Setup keyboard navigation for menus\n     */\n    private setupMenuKeyboardNavigation(): void {\n        document.addEventListener('keydown', (event: KeyboardEvent) => {\n            const menuItem = (event.target as HTMLElement).closest(\n                this.options.menuButtonSelector\n            ) as HTMLElement | null;\n            if (!menuItem) {\n                return;\n            }\n\n            const menu = menuItem.closest(this.options.menuSelector);\n            if (!menu) {\n                return;\n            }\n\n            const items = Array.from(\n                menu.querySelectorAll(this.options.menuButtonSelector)\n            ) as HTMLElement[];\n            const currentIndex = items.indexOf(menuItem);\n\n            this.handleMenuKeyNavigation(event, items, currentIndex);\n        });\n    }\n\n    /**\n     * Handle menu keyboard navigation\n     */\n    private handleMenuKeyNavigation(\n        event: KeyboardEvent,\n        items: HTMLElement[],\n        currentIndex: number\n    ): void {\n        const key = event.key as NavigationKey;\n\n        switch (key) {\n            case 'ArrowDown':\n                event.preventDefault();\n                this.focusMenuItem(items, currentIndex + 1, 0);\n                break;\n\n            case 'ArrowUp':\n                event.preventDefault();\n                this.focusMenuItem(items, currentIndex - 1, items.length - 1);\n                break;\n\n            case 'Home':\n                event.preventDefault();\n                items[0]?.focus();\n                break;\n\n            case 'End':\n                event.preventDefault();\n                items[items.length - 1]?.focus();\n                break;\n        }\n    }\n\n    /**\n     * Focus a menu item with wraparound\n     */\n    private focusMenuItem(items: HTMLElement[], index: number, fallbackIndex: number): void {\n        const targetItem = items[index] || items[fallbackIndex];\n        targetItem?.focus();\n    }\n\n    /**\n     * Dispatch a custom event\n     */\n    private dispatchEvent<T extends object>(name: string, detail: T): void {\n        document.dispatchEvent(\n            new CustomEvent(name, {\n                detail,\n                bubbles: true,\n            })\n        );\n    }\n}\n\n/**\n * Initialize the navigation manager\n * Returns the singleton instance\n */\nexport function initNavigation(options?: NavigationManagerOptions): NavigationManager {\n    return NavigationManager.getInstance(options);\n}\n","/**\n * Accelade Navigation\n *\n * Sidebar navigation components for Accelade.\n * Provides interactive sidebar functionality with keyboard navigation,\n * accessibility support, and responsive mobile handling.\n */\n\nimport { NavigationManager, initNavigation } from './core/navigation';\nimport type {\n    SidebarState,\n    SidebarConfig,\n    NavigationManagerOptions,\n    NavigationEvents,\n} from './core/navigation';\n\n// Extend window type for TypeScript\ndeclare global {\n    interface Window {\n        Accelade?: {\n            store?: (name: string) => {\n                $get: <T = unknown>(key: string) => T;\n                $set: <T = unknown>(key: string, value: T) => void;\n                $subscribe: (callback: () => void) => () => void;\n            };\n            notify?: {\n                success: (title: string, message?: string, options?: { duration?: number }) => void;\n                danger: (title: string, message?: string, options?: { duration?: number }) => void;\n                warning: (title: string, message?: string, options?: { duration?: number }) => void;\n                info: (title: string, message?: string, options?: { duration?: number }) => void;\n            };\n        };\n        AcceladeNavigation?: {\n            manager: NavigationManager;\n            toggle: () => void;\n            expand: () => void;\n            collapse: () => void;\n            getState: () => SidebarState;\n            isCollapsed: () => boolean;\n            isMobile: () => boolean;\n            version: string;\n        };\n    }\n}\n\n/**\n * Initialize Navigation when DOM is ready\n * Uses a flag to prevent multiple initializations on SPA navigation\n */\nfunction init(): void {\n    // Prevent multiple initializations (important for SPA navigation)\n    if (window.AcceladeNavigation) {\n        return;\n    }\n\n    const initializeNavigation = (): void => {\n        const manager = initNavigation();\n\n        // Expose global API\n        window.AcceladeNavigation = {\n            manager,\n            toggle: () => manager.toggleSidebar(),\n            expand: () => manager.expandSidebar(),\n            collapse: () => manager.collapseSidebar(),\n            getState: () => manager.getState(),\n            isCollapsed: () => manager.isCollapsed(),\n            isMobile: () => manager.isMobile(),\n            version: '0.1.0',\n        };\n\n        // Dispatch ready event\n        document.dispatchEvent(\n            new CustomEvent('navigation:ready', {\n                detail: { manager },\n            })\n        );\n    };\n\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', initializeNavigation);\n    } else {\n        initializeNavigation();\n    }\n}\n\n// Re-initialize accessibility after Accelade navigation\ndocument.addEventListener('accelade:navigated', () => {\n    if (window.AcceladeNavigation?.manager) {\n        window.AcceladeNavigation.manager.setupAccessibility();\n    }\n});\n\n// Auto-initialize\ninit();\n\n// Export for module usage\nexport { NavigationManager, initNavigation };\nexport type { SidebarState, SidebarConfig, NavigationManagerOptions, NavigationEvents };\n"],"names":["defaultSidebarConfig","side","collapsible","variant","mobileBreakpoint","width","widthIcon","widthMobile","defaultNavigationOptions","autoInit","resizeDebounce","sidebarSelector","menuSelector","menuButtonSelector","triggerSelector","_NavigationManager","constructor","options","this","initialized","resizeTimeout","lastWindowWidth","previousState","open","mobileOpen","config","window","innerWidth","init","getInstance","instance","resetInstance","destroy","bindEvents","setupAccessibility","handleResize","dispatchEvent","manager","clearTimeout","isInitialized","document","addEventListener","handleKeyDown","bind","handleResizeEvent","setupMenuKeyboardNavigation","event","key","closeMobileSidebar","setTimeout","querySelectorAll","forEach","sidebar","hasAttribute","setAttribute","menu","button","currentWidth","breakpoint","updateSidebarDimensions","wrapper","querySelector","styles","getComputedStyle","sidebarWidth","getPropertyValue","sidebarWidthIcon","sidebarWidthMobile","style","setProperty","getStore","accelade","Accelade","store","getState","$set","mobile","state","openMobileSidebar","toggleSidebar","isMobile","newMobileOpen","$get","newOpen","expandSidebar","collapseSidebar","isCollapsed","isMobileOpen","setState","getConfig","setConfig","menuItem","target","closest","items","Array","from","currentIndex","indexOf","handleMenuKeyNavigation","preventDefault","focusMenuItem","length","focus","index","fallbackIndex","targetItem","name","detail","CustomEvent","bubbles","NavigationManager","initNavigation","AcceladeNavigation","initializeNavigation","toggle","expand","collapse","version","readyState"],"mappings":"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"}